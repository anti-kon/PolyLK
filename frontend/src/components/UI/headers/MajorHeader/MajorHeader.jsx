import React, {useEffect, useRef, useState} from 'react';
import classes from "./MajorHeader.module.css";
import img from "../../../../img/icon.svg";
import {BiExit, BiSolidDownArrow, BiUser} from "react-icons/bi";
import {useNavigate} from "react-router-dom";
import ContentBox from "../../content_boxes/content_box/ContentBox";
import ShadowButton from "../../buttons/shadow_button/ShadowButton";

const MajorHeader = () => {
    const navigate = useNavigate();
    
    const [isModalVisible, setIsModalVisible] = useState(false)

    const modal = useRef(null);
    const buttonOpenModel = useRef(null);

    useEffect(() => {
         const onClick = e => {
             if (modal.current != null &&
                 !modal.current.contains(e.target) &&
                 !buttonOpenModel.current.contains(e.target))
                 setIsModalVisible(false);
         }
         document.addEventListener('click', onClick);
         return () => document.removeEventListener('click', onClick);
    }, []);


    return (
        <header id={"major_header"} className={classes.majorHeader}>
            <div className={classes.headerContent}>
                <svg
                    className={classes.iconStyle}
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 540 541"
                >
                    <path fill="#016A69" d="M541 288c0 2.042 0 4.085-.386 6.745-1.25 7.677-1.802 14.791-3.031 21.786-5.046 28.719-14.132 56.063-27.949 81.827-22.686 42.303-54.18 76.457-94.855 101.845-41.646 25.994-86.94 40.372-136.351 40.68-1.478.01-2.952.729-4.428 1.117-2.042 0-4.085 0-6.695-.427-14.891-1.848-29.282-2.792-43.523-4.794-23.785-3.345-46.26-11.292-67.836-21.62-37.989-18.186-70.082-43.849-96.089-77.049-17.818-22.746-31.757-47.673-41.45-74.873-5.715-16.034-10.626-32.356-12.334-49.408-1.436-14.332-3.703-28.698-3.62-43.037.11-19.34 2.21-38.602 6.597-57.619 6.912-29.961 18.154-58.042 34.556-84 15.138-23.958 33.398-45.208 55.276-63.398 16.5-13.718 34.129-25.612 53.358-35.027 27.381-13.406 56.118-22.263 86.54-25.847 26.105-3.075 52.117-2.857 77.92 1.483 28.053 4.718 54.756 13.864 80.067 27.13 35.88 18.805 65.744 44.591 90.261 76.643 16.119 21.071 28.518 44.285 37.689 69.157 6.246 16.939 10.969 34.31 13.212 52.297.85 6.818 2.037 13.594 3.071 20.389 0 .75 0 1.5-.25 2.956-.415 8.761-.678 16.816-.694 24.87-.006 2.725.611 5.45.944 8.174m-66.728 107.454c.245-7.114.586-14.226.697-21.343.068-4.31.608-8.856-.507-12.898-3.316-12.025-10.224-17.74-24.48-18.083-21.315-.513-42.652-.196-63.978-.05-3.408.024-6.923.622-10.192 1.61-10.454 3.156-14.794 11.258-16.384 21.777-2.226 0-4.362.002-6.499 0-13.163-.008-26.326-.095-39.488.03-3.272.031-6.677.288-9.78 1.232-10.7 3.254-15.9 11.095-16.997 22.272-8.565 0-16.877.155-25.17-.173-1.197-.048-3.144-2.32-3.314-3.733-1.202-10.012-12.936-18.648-22.209-18.283-15.781.621-31.606.171-47.562.171-.28-1.44-.488-2.543-.712-3.643-2.174-10.711-11.251-18.538-21.494-18.597-23.65-.137-47.3-.181-70.949-.101-13.113.044-23.653 10.991-22.36 24.837.616 6.607.6 13.365-.002 19.975-1.348 14.783 11.925 24.712 24.538 24.575 13.995-.152 27.993-.11 41.986.075 1.52.02 4.18 1.348 4.35 2.389 2.044 12.55 12.924 19.812 24.779 19.567 14.966-.31 29.944-.075 44.866-.075.498 1.455.89 2.522 1.23 3.605 4.141 13.162 11.085 18.375 24.763 18.395 22.326.033 44.653.043 66.98-.03 11.668-.037 20.62-7.495 22.571-18.95.53-3.112 1.66-4.112 4.823-4.074 13.994.166 27.997-.184 41.986.14 17.175.4 25.76-10.433 26.808-23.086h6.342c13.996-.002 27.992.075 41.987-.033 11.458-.088 19.77-6.177 23.371-17.498M240.992 89.51c-13.805 12.465-27.677 24.858-41.4 37.412-18.507 16.931-36.895 33.992-55.345 50.987-6.05 5.574-7.883 12.438-4.9 19.734 2.56 6.259 8.48 10.913 16.362 10.462 6.919-.395 13.878-.082 21.294-.082v7.432c-.012 26.153-.068 52.305-.02 78.458.038 19.742 18.46 38.044 38.285 38.065 36.813.038 73.635-.436 110.437.19 21.533.368 41.963-18.115 41.443-41.445-.567-25.473-.142-50.97-.15-76.456v-6.242c7.567 0 14.53-.15 21.483.041 7.309.2 12.335-3.226 15.422-9.49 3.875-7.86 1.387-14.839-3.353-19.516-6.272-6.189-12.71-12.215-19.208-18.167-18.73-17.155-37.548-34.215-56.29-51.358-12.867-11.769-25.671-23.606-38.491-35.425-11.527-10.627-20.367-7.927-27.995-1.091-5.805 5.201-11.39 10.648-17.574 16.491"/><path fill="#2B7375" d="M541 287.531c-.333-2.255-.95-4.98-.944-7.704.016-8.055.279-16.11.694-24.496.25 10.357.25 21.044.25 32.2"/><path fill="#F7FCFC" d="M474.177 395.862c-3.507 10.913-11.818 17.002-23.276 17.09-13.995.108-27.991.03-41.987.033h-6.342c-1.048 12.653-9.633 23.485-26.808 23.087-13.989-.325-27.992.025-41.986-.141-3.162-.038-4.293.962-4.823 4.074-1.95 11.455-10.903 18.913-22.57 18.95-22.328.073-44.655.063-66.981.03-13.678-.02-20.622-5.233-24.763-18.395-.34-1.083-.732-2.15-1.23-3.605-14.922 0-29.9-.234-44.866.075-11.855.245-22.735-7.017-24.78-19.567-.169-1.04-2.83-2.369-4.349-2.389-13.993-.184-27.991-.227-41.986-.075-12.613.137-25.886-9.792-24.538-24.575.602-6.61.618-13.368.001-19.975-1.292-13.846 9.248-24.793 22.361-24.837 23.65-.08 47.3-.036 70.95.101 10.242.06 19.319 7.886 21.493 18.597.224 1.1.431 2.203.712 3.643 15.956 0 31.78.45 47.562-.171 9.273-.365 21.007 8.271 22.209 18.283.17 1.414 2.117 3.685 3.314 3.733 8.293.328 16.605.173 25.17.173 1.097-11.177 6.297-19.018 16.997-22.272 3.103-.944 6.508-1.2 9.78-1.232 13.162-.125 26.325-.038 39.488-.03 2.137.002 4.273 0 6.5 0 1.59-10.519 5.929-18.62 16.383-21.778 3.269-.987 6.784-1.585 10.192-1.608 21.326-.147 42.663-.464 63.978.049 14.256.343 21.164 6.058 24.48 18.083 1.115 4.042.575 8.587.507 12.898-.11 7.117-.452 14.23-.792 21.751m-182.678 49.146c4.828.002 9.656.02 14.483.004 6.414-.02 9.943-3.562 10.002-10.146.062-6.825.039-13.65.028-20.476-.01-6.869-4.012-11.343-10.848-11.38-22.14-.12-44.281-.1-66.42.045-6.213.04-11.468 3.621-10.85 11.198.524 6.449.08 12.976.093 19.468.02 8.897 2.386 11.306 11.074 11.304 17.146-.003 34.292-.011 52.438-.017m104.488-71.485c7.342 7.006 5.797 16.352 6.14 25.492 17.418 0 34.385.263 51.326-.283 2.56-.082 6.944-3.76 7.153-6.077.857-9.468.848-19.078.276-28.583-.271-4.51-4.135-6.988-8.81-7.003-22.993-.076-45.986-.122-68.979-.048-5.61.018-8.64 3.223-9.293 9.294 7.834.227 15.629.725 22.187 7.208m-7.818 13.285c-2.109-4.75-5.664-6.923-10.954-6.857-12.317.154-24.638.041-36.956.044-9.656.002-19.312-.075-28.966.055-6.873.093-10.54 3.866-9.744 9.984 8.536-.68 16.426.825 22.436 7.696 6.023 6.887 5.677 15.48 6.082 24.264 17.321 0 34.267.2 51.203-.129 4.7-.091 7.419-4.039 7.571-8.419.3-8.619-.152-17.264-.672-26.638m-278.667 14.2h33.637c-.032-9.403-.393-18.272 5.914-25.575 6.639-7.685 15.533-7.947 24.588-7.407.033-5.46-3.67-9.003-9.149-9.013q-33.97-.063-67.94-.03c-5.997.006-10.416 4.15-10.533 10.076-.145 7.324-.172 14.658.046 21.978.195 6.551 3.879 9.895 10.45 9.96 3.995.04 7.992.01 12.987.01m117.454-8.786 17.7-3.254c-.887-4.875-3.936-7.87-9.28-7.902a6193 6193 0 0 0-68.438-.03c-5.9.03-9.803 4.22-9.904 10.139a704 704 0 0 0-.017 21.98c.09 6.312 3.685 9.821 9.945 9.836 14.32.034 28.64.019 42.962-.007 1.267-.002 2.535-.229 4.176-.387-.814-12.16.29-23.369 12.856-30.375m14.287-302.964c5.934-5.59 11.518-11.038 17.323-16.24 7.628-6.835 16.468-9.535 27.995 1.092 12.82 11.82 25.624 23.656 38.491 35.425 18.742 17.143 37.56 34.203 56.29 51.358 6.498 5.952 12.936 11.978 19.208 18.167 4.74 4.677 7.228 11.657 3.353 19.517-3.087 6.263-8.113 9.69-15.422 9.489-6.954-.19-13.916-.041-21.483-.041v6.242c.008 25.487-.417 50.983.15 76.456.52 23.33-19.91 41.813-41.443 41.446-36.802-.627-73.624-.153-110.437-.191-19.825-.021-38.247-18.323-38.284-38.065-.05-26.153.007-52.305.018-78.458v-7.432c-7.415 0-14.374-.313-21.293.082-7.882.45-13.802-4.203-16.361-10.462-2.984-7.296-1.151-14.16 4.9-19.734 18.449-16.995 36.837-34.056 55.344-50.987 13.723-12.554 27.595-24.947 41.651-37.664M189.975 267.5c.006 7.995-.146 15.994.064 23.984.189 7.166 2.816 13.475 7.726 18.777 6.378 6.887 14.757 8.456 23.522 8.481 33.813.099 67.626.082 101.438-.02 3.773-.01 7.666-.386 11.292-1.37 12.046-3.267 19.905-14.16 19.958-27.566.098-24.985.03-49.97.03-74.954v-19.825h5.682c8.827.011 17.66.169 26.48-.082 1.884-.053 4.62-1.151 5.311-2.572.58-1.192-.793-4.003-2.09-5.32-4.535-4.602-9.382-8.9-14.163-13.256-22.019-20.054-44.056-40.087-66.085-60.129-10.914-9.93-22.023-19.66-32.636-29.901-4.045-3.903-6.641-2.81-9.98.373-6.846 6.53-13.815 12.933-20.782 19.336-14.745 13.554-29.492 27.106-44.294 40.598-9.916 9.038-19.966 17.929-29.88 26.968-5.885 5.364-11.723 10.79-17.348 16.42-1.19 1.191-2.304 3.824-1.759 5.017.603 1.319 3.13 2.384 4.861 2.451 6.819.264 13.654.09 20.483.082 3.94-.005 7.881-.001 12.17-.001z"/><path fill="#016A6A" d="M291 445.008c-17.647.006-34.793.014-51.94.017-8.687.002-11.054-2.407-11.073-11.304-.013-6.492.431-13.02-.094-19.468-.617-7.577 4.638-11.158 10.85-11.198 22.14-.145 44.281-.164 66.421-.045 6.836.037 10.838 4.511 10.848 11.38.01 6.826.034 13.651-.028 20.476-.06 6.584-3.588 10.126-10.002 10.146-4.827.015-9.655-.002-14.983-.004"/><path fill="#026B6A" d="M395.731 373.266c-6.302-6.226-14.097-6.724-21.931-6.951.652-6.071 3.683-9.276 9.293-9.294 22.993-.074 45.986-.028 68.98.048 4.674.015 8.538 2.492 8.809 7.003.572 9.505.581 19.115-.276 28.583-.21 2.316-4.593 5.995-7.153 6.077-16.94.546-33.908.283-51.326.283-.343-9.14 1.202-18.486-6.396-25.749"/><path fill="#036B6A" d="M388.359 387.178c.33 9.004.783 17.65.482 26.268-.152 4.38-2.87 8.328-7.57 8.42-16.937.328-33.883.128-51.204.128-.405-8.783-.059-17.377-6.082-24.264-6.01-6.87-13.9-8.376-22.436-7.696-.795-6.118 2.871-9.89 9.744-9.984 9.654-.13 19.31-.053 28.966-.055 12.318-.003 24.639.11 36.956-.044 5.29-.066 8.845 2.106 11.144 7.227"/><path fill="#026B6A" d="M109.003 401.008c-4.496-.001-8.493.03-12.489-.01-6.57-.066-10.254-3.41-10.45-9.96-.217-7.321-.19-14.655-.045-21.979.117-5.926 4.536-10.07 10.533-10.076q33.97-.033 67.94.03c5.479.01 9.182 3.553 9.149 9.013-9.055-.54-17.95-.278-24.588 7.407-6.307 7.303-5.946 16.172-5.914 25.575z"/><path fill="#026B6A" d="M226.622 392.41c-12.233 6.817-13.336 18.026-12.522 30.186-1.641.158-2.909.385-4.176.387-14.321.026-28.642.041-42.962.007-6.26-.015-9.856-3.524-9.945-9.837a704 704 0 0 1 .017-21.98c.1-5.919 4.004-10.108 9.904-10.139 22.812-.12 45.626-.1 68.438.031 5.344.031 8.393 3.027 9.28 7.902-5.904 1.085-11.802 2.17-18.034 3.444"/><path fill="#016A69" d="M189.975 267v-72.01c-4.289 0-8.23-.003-12.17.002-6.829.007-13.664.182-20.483-.082-1.731-.067-4.258-1.132-4.86-2.45-.546-1.194.568-3.827 1.758-5.017 5.625-5.631 11.463-11.057 17.347-16.421 9.915-9.04 19.965-17.93 29.88-26.968 14.803-13.492 29.55-27.044 44.295-40.598 6.967-6.403 13.936-12.806 20.783-19.336 3.338-3.183 5.934-4.276 9.979-.373 10.613 10.242 21.722 19.97 32.636 29.901 22.03 20.042 44.066 40.075 66.085 60.13 4.781 4.354 9.628 8.653 14.163 13.255 1.297 1.317 2.67 4.128 2.09 5.32-.691 1.42-3.427 2.519-5.312 2.572-8.82.25-17.652.093-26.48.083-1.788-.002-3.576 0-5.68 0v19.824c-.002 24.984.067 49.97-.031 74.954-.053 13.406-7.912 24.299-19.958 27.567-3.626.983-7.519 1.358-11.292 1.37-33.812.101-67.625.118-101.438.02-8.765-.026-17.144-1.595-23.522-8.482-4.91-5.302-7.537-11.61-7.726-18.777-.21-7.99-.058-15.989-.064-24.484"/>
                </svg>
                <button ref={buttonOpenModel}
                     onClick={() => {setIsModalVisible(!isModalVisible);}}
                     className={classes.accountButton}>
                    <label className={classes.accountLabel}>Пользователь</label>
                    <BiSolidDownArrow className={classes.arrowStyle} />
                </button>
                {isModalVisible &&
                    <ContentBox style={{
                                    maxWidth: "min-content",
                                    position: "absolute",
                                    top: "43px",
                                    right: "7px",
                                    background: "white"}}>
                        <div ref={modal} className={classes.modalContent}>
                            <ShadowButton onClick={() => {navigate("../account");}}
                                          style={{
                                              minWidth: "max-content",
                                              fontSize: "15px",
                                              padding: "3px 7px 3px 6px"}}>
                                <BiUser className={classes.accountButtonIcon}/>Личный кабинет
                            </ShadowButton>
                            <ShadowButton onClick={() => {navigate("../login")}}
                                          style={{
                                              minWidth: "max-content",
                                              fontSize: "15px",
                                              padding: "3px 7px 3px 6px"}}>
                                <BiExit className={classes.exitButtonIcon}/>Выйти
                            </ShadowButton>
                        </div>
                    </ContentBox>}
            </div>
        </header>
    );
};

export default MajorHeader;